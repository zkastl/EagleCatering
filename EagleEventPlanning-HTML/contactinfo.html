<!DOCTYPE html>
<html>
	<head>
		<meta charset="ISO-8859-1">
		<title>Eagle Event Planning</title>
		<link rel="stylesheet" type="text/css" href="style.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	</head>
	<body>
<script>
function getCurrentUser() {
    	$.ajax({
    	    url: "/EagleEventPlanning/services/employees/current",
    	    type: 'GET',
    	    datatype: 'json',
    	    statusCode: {
    	    200: function( planner ) {
    	
    			$('#userWelcome').html("Welcome, "+planner.name);
    			$('#login-logout').html('<a href="logout.html">Logout</a>');
    	    },
    	    401:function( response ) {
    			$('#login-logout').html('<a href="Login.html">Login</a>');
    	    },
    	    
    	    error: function(jqXHR, textStatus, errorThrown) {
      	        console.log("error " + textStatus);
      	        console.log("incoming Text " + jqXHR.responseText);},
    	    beforeSend: setHeader       
    	  });   	
    }
  
	function getCookie(cname) {
	    var name = cname + "=";
	    var decodedCookie = decodeURIComponent(document.cookie);
	    var ca = decodedCookie.split(';');
	    for(var i = 0; i <ca.length; i++) {
	        var c = ca[i];
	        while (c.charAt(0) == ' ') {
	            c = c.substring(1);
	        }
	        if (c.indexOf(name) == 0) {
	            return c.substring(name.length, c.length);
	        }
	    }
	    return "";
	}
	
	function setHeader(xhr) {
		  token = getCookie("token");
		  xhr.setRequestHeader('Authorization', 'Bearer '+token );		  
	}
	
	$(document).ready(function() {
    		getCurrentUser();
    })
</script>

		<h1>Eagle Event Planning</h1>
		<div style="color: white; background: gray; width: 100%; font-size: 12;">
		<table class="nav">
			<tr>
				<td><a href="MainPage.html">Home</a></td>
				<td><a href="contactinfo.html">Contact</a></td>
				<td id="login-logout"><a href="login.html">Login</a></td>
				<td id="userWelcome" style="text-align: right; width: 100%"></td>
			</tr>
		</table>
		</div>

		<div id="contactbody" style="background-color:white;
									 padding:5px;
									 transform: translate(0px, 20px);
									 margin:auto;
									 max-width:70%;
									 max-height:50%;
									 border-style:solid;
									 border-width:2px;">
			<div id=content style="margin: auto;width:50%;">
				<p>Need an event planned? Contact Us!</p>
				<p><b>Eagle Events</b><br>
					123 F St.<br>
					Oklahoma City, OK 73120<br>
					(405)555-5555<br>
					eventcoordinator@eagleevents.com</p>
			</div>
		</div>
	</body>
</html>