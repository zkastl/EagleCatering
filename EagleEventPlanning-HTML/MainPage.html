<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Eagle Event Planning</title>
<link rel="stylesheet" type="text/css" href="style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
</head>
<body>
<script>
function getCurrentUser() {
    	$.ajax({
    	    url: "/EagleEventPlanning/services/employees/current",
    	    type: 'GET',
    	    datatype: 'json',
    	    statusCode: {
    	    200: function( planner ) {
    	    	$('#menuBar').html('<td><a href="MainPage.html">Home</a></td>' +
									'<td><a href="contactinfo.html">Contact</a></td>' +
									'<td><a href="events.html">Events</a></td>' +
									'<td><a href="ClientManagement.html">Clients</a></td>' +
									'<td><a href="EmployeeManagement.html">Employees</a></td>' +
									'<td><a href="logout.html">Logout</a></td>' +
									'<td style="text-align: right; width: 100%"> Welcome, ' + planner.name + '</td>');
    	    },
    	    401:function( response ) {
    			$('#login-logout').html('<a href="Login.html">Login</a>');}
    	    },
    	    
    	    error: function(jqXHR, textStatus, errorThrown) {
      	        console.log("error " + textStatus);
      	        console.log("incoming Text " + jqXHR.responseText);
      	    },
    	    beforeSend: setHeader   	
    });
}
  
	function getCookie(cname) {
	    var name = cname + "=";
	    var decodedCookie = decodeURIComponent(document.cookie);
	    var ca = decodedCookie.split(';');
	    for(var i = 0; i <ca.length; i++) {
	        var c = ca[i];
	        while (c.charAt(0) == ' ') {
	            c = c.substring(1);
	        }
	        if (c.indexOf(name) == 0) {
	            return c.substring(name.length, c.length);
	        }
	    }
	    return "";
	}
	
	function setHeader(xhr) {
		  token = getCookie("token");
		  xhr.setRequestHeader('Authorization', 'Bearer '+token );		  
	}
	$(document).ready(function() {
    		getCurrentUser();
    })
</script>
<h1>Eagle Event Planning</h1>
<div style="color: white; background: gray; width: 100%; font-size: 12;">
<table class="nav" id="menuBar">
	<tr>
		<td><a href="MainPage.html">Home</a></td>
		<td><a href="contactinfo.html">Contact</a></td>
		<td id="login-logout"><a href="Login.html">Login</a></td>
	</tr>
</table>
</div>

<div align="center">
	<div style="background: white;
				padding:5px;
				transform:translate(0px, 20px);
				margin:auto;
				max-width:70%;
				max-height:50%;
				border-style:solid;
				border-width:2px;">
		<h3><br/>Eagle Event Planning and Catering<br/><font size="3em">Award Winning Event Planning<br/>Get the Personal and Effective Approach</font></h3>
	</div>
</div>
</body>
</html>